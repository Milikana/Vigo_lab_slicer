# Vigo Lab Slicer Service

–í–µ–±-—Å–µ—Ä–≤–∏—Å (Flask) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ª–∞–π—Å–∏–Ω–≥–∞ 3D-–º–æ–¥–µ–ª–µ–π (STL) —Å –ø–æ–º–æ—â—å—é **OrcaSlicer** –∏ —Ä–∞—Å—á–µ—Ç–∞ —Ç–æ—á–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–µ—á–∞—Ç–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å STL —Ñ–∞–π–ª, –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –≤ —Ä—É–±–ª—è—Ö, –∞ —Ç–∞–∫–∂–µ —Å–∫–∞—á–∞—Ç—å G-code –∏–ª–∏ 3MF –ø—Ä–æ–µ–∫—Ç.

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![Flask](https://img.shields.io/badge/Flask-2.0%2B-green)
![OrcaSlicer](https://img.shields.io/badge/OrcaSlicer-CLI-orange)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–∞–π—Å–∏–Ω–≥**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OrcaSlicer CLI –¥–ª—è –Ω–∞—Ä–µ–∑–∫–∏ –º–æ–¥–µ–ª–µ–π.
*   **–£–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç –ª—É—á—à—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –º–æ–¥–µ–ª–∏ (`--arrange` / `--orient`), –µ—Å–ª–∏ —Å–ª–∞–π—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞.
*   **–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏**: –£—á–∏—Ç—ã–≤–∞–µ—Ç:
    *   –í–µ—Å –∏ —Ç–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞ (PLA/PETG).
    *   –í—Ä–µ–º—è –ø–µ—á–∞—Ç–∏ (–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞).
    *   –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—é.
    *   –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.
    *   –ú–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞.
*   **–ì–∏–±–∫–∏–π –≤—ã–≤–æ–¥**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ JSON, HTML (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–∞), G-code –∏–ª–∏ 3MF.

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
1.  **Python 3.8+**
2.  **OrcaSlicer**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ PATH (–∏–ª–∏ –ª–µ–∂–∞—Ç—å –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞).
    *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `orcaslicer`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–ª–∏–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –≤ `app.py`.*
3.  **Linux/Windows/macOS** (–∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `subprocess`, –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π).

### –®–∞–≥–∏
1.  –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
    ```
    git clone https://github.com/Milikana/Vigo_lab_slicer.git
    cd Vigo_lab_slicer
    ```

2.  –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```
    python -m venv venv
    source venv/bin/activate  # –î–ª—è Windows: venv\Scripts\activate
    pip install flask
    ```

3.  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ):
    *   `process/` ‚Äî –ø–∞–ø–∫–∞ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–µ—á–∞—Ç–∏ (`.json`).
    *   `printers/` ‚Äî –ø–∞–ø–∫–∞ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤ (–≤ –∫–æ–¥–µ –∑–∞—à–∏—Ç `Bambu Lab P1S 0.4 nozzle.json`).
    *   `test_data/` ‚Äî –ø–∞–ø–∫–∞ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–ª–∞—Å—Ç–∏–∫–∞ (`filament.json`).
    *   `temp/` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ü–µ–Ω

–¶–µ–Ω—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ `app.py`. –ó–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω—ã –≤ —Ä—É–±–ª—è—Ö (–∏–ª–∏ –∫–æ–ø–µ–π–∫–∞—Ö, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π –ª–æ–≥–∏–∫–∏).

CENA_PLA_PLATIKE = 1.0 # –¶–µ–Ω–∞ –∑–∞ –≥—Ä–∞–º–º PLA (—Ä—É–±)
CENA_PETG_PLATIKE = 1.0 # –¶–µ–Ω–∞ –∑–∞ –≥—Ä–∞–º–º PETG (—Ä—É–±)
CENA_ELEKTRIKE = 7.00 # –¶–µ–Ω–∞ –∑–∞ –∫–í—Ç*—á
CENA_TISKALNIKA_URO = 100 # –°—Ç–æ–∏–º–æ—Å—Ç—å —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–Ω—Ç–µ—Ä–∞
MINIMALNA_CENA = 150 # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞

text

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

python app.py

text
–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://0.0.0.0:8080`.

## üîå API Endpoints

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
*   **URL:** `/`
*   **Method:** `GET`
*   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç HTML —Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –∏ –≤—ã–±–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É `process/` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ JSON –ø—Ä–æ—Ñ–∏–ª–µ–π).

### 2. –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
*   **URL:** `/price`
*   **Method:** `POST`
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (FormData):**
    *   `file`: –§–∞–π–ª –º–æ–¥–µ–ª–∏ (`.stl`).
    *   `quality`: –ò–º—è –ø—Ä–æ—Ñ–∏–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ (–±–µ–∑ `@BBL X1C`).
    *   `output`: –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (`json`, `slicedata` (html), `3mf`, `gcode`).
*   **–û—Ç–≤–µ—Ç (JSON):**
    ```
    {
        "cena": 250.50,
        "cena_materiala": 45.20,
        "total_time_in_min": 125,
        "filament": {
            "type": "PLA",
            "used_g": "45.2"
        },
        ...
    }
    ```
